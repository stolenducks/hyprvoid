#!/usr/bin/env bash
# HyprVoid Walker Launcher
# Launch walker with fallback to wofi
set -euo pipefail

# Logging
LOG_DIR="${XDG_CACHE_HOME:-$HOME/.cache}/hyprvoid/logs"
mkdir -p "$LOG_DIR"
LOG="$LOG_DIR/walker-$(date +%s).log"

{
  echo "[$(date +'%Y-%m-%d %H:%M:%S')] hyprvoid-launch-walker started"
  
  # Check if walker is available
  if ! command -v walker >/dev/null 2>&1; then
    echo "[ERROR] walker not found in PATH, falling back to wofi"
    if command -v wofi >/dev/null 2>&1; then
      exec wofi --show drun
    else
      notify-send "Launcher Error" "Neither walker nor wofi found"
      exit 1
    fi
  fi
  
  # Launch walker
  # Walker will use ~/.config/walker/config.toml automatically
  exec walker
  
} 2>&1 | tee -a "$LOG"
